<!DOCTYPE project>
<project name="celesta" default="overall">

	<!--OVERALL-->
	<target name="overall" depends="pom,pom-schemasync" />

	<!--CELESTA-->
	<target name="makedirs">
		<mkdir dir="../mvncelesta" />
		<mkdir dir="../mvncelesta/src" />
		<mkdir dir="../mvncelesta/src/main" />
		<mkdir dir="../mvncelesta/src/main/java" />
		<mkdir dir="../mvncelesta/src/main/javacc" />
		<mkdir dir="../mvncelesta/src/main/resources" />
		<mkdir dir="../mvncelesta/src/test" />
		<mkdir dir="../mvncelesta/src/test/java" />
		<mkdir dir="../mvncelesta/src/test/resources" />
		<mkdir dir="../mvncelesta/lib/com/microsoft/sqlserver/sqljdbc4/4.0" />
		<mkdir dir="../mvncelesta/lib/com/oracle/jdbc/ojdbc6/11.2.0" />
	</target>

	<target name="copysrc" depends="makedirs">
		<copy todir="../mvncelesta/src/main/java">
			<fileset dir="src">
				<include name="**/*.java" />
				<exclude name="**/dbschemasync/*.java" />
				<exclude name="**/CelestaParser*.java" />
				<exclude name="**/FilterParser*.java" />
				<exclude name="**/ParseException.java" />
				<exclude name="**/SimpleCharStream.java" />
				<exclude name="**/Token.java" />
				<exclude name="**/TokenMgrError.java" />
			</fileset>
		</copy>
		<copy todir="../mvncelesta/src/main/resources">
			<fileset dir="src">
				<include name="**/*.sql" />
			</fileset>
		</copy>
		<copy todir="../mvncelesta/src/main/javacc" flatten="true">
			<fileset dir="src">
				<include name="**/*.jj" />
			</fileset>
		</copy>
		<copy todir="../mvncelesta/pylib">
			<fileset dir="pylib">
				<exclude name="**/*.class" />
			</fileset>
		</copy>
	</target>
	<target name="copytest" depends="makedirs">
		<copy todir="../mvncelesta/src/test/java">
			<fileset dir="test">
				<include name="**/*.java" />
			</fileset>
		</copy>
		<copy todir="../mvncelesta/src/test/resources">
			<fileset dir="test">
				<include name="**/*.sql" />
				<include name="**/*.txt" />
				<include name="**/*.properties" />
				<include name="**/*.template" />
			</fileset>
		</copy>
	</target>
	<target name="copyscores">
		<copy todir="../mvncelesta/score">
			<fileset dir="score">
				<include name="**/*.py" />
				<include name="**/*.sql" />
				<include name="**/*.cmd" />
			</fileset>
		</copy>
		<copy todir="../mvncelesta/testScore">
			<fileset dir="testScore">
				<include name="**/*.py" />
				<include name="**/*.sql" />
				<include name="**/*.cmd" />
			</fileset>
		</copy>
	</target>
	
	<target name = "localrepo" depends="makedirs">
		<copy tofile="../mvncelesta/lib/com/microsoft/sqlserver/sqljdbc4/4.0/sqljdbc4-4.0.pom" file="lib/sqljdbc4-4.0.pom" />
		<copy tofile="../mvncelesta/lib/com/microsoft/sqlserver/sqljdbc4/4.0/sqljdbc4-4.0.jar" file="lib/sqljdbc4.jar" />
		<copy tofile="../mvncelesta/lib/com/oracle/jdbc/ojdbc6/11.2.0/ojdbc6-11.2.0.jar" file="lib/ojdbc6.jar"/>
		<copy tofile="../mvncelesta/lib/com/oracle/jdbc/ojdbc6/11.2.0/ojdbc6-11.2.0.pom" file="lib/ojdbc6-11.2.0.pom"/>
	</target>
	
	<target name="pom" depends="copysrc,copytest,copyscores,localrepo">
		<copy tofile="../mvncelesta/LICENSE.txt" file="gpl.txt" />
		<copy tofile="../mvncelesta/pom.xml" file="pom-celesta.xml" />
	</target>


	<!--SCHEMASYNC-->

	<target name="makedirs-schemasync">
		<mkdir dir="../mvndbschemasync" />
		<mkdir dir="../mvndbschemasync/src" />
		<mkdir dir="../mvndbschemasync/src/assembly" />
		<mkdir dir="../mvndbschemasync/src/main" />
		<mkdir dir="../mvndbschemasync/src/main/java" />
		<mkdir dir="../mvndbschemasync/src/main/javacc" />
		<mkdir dir="../mvndbschemasync/src/main/resources" />
		<mkdir dir="../mvndbschemasync/src/test" />
		<mkdir dir="../mvndbschemasync/src/test/java" />
		<mkdir dir="../mvndbschemasync/src/test/resources" />
	</target>

	<target name="copysrc-schemasync" depends="makedirs-schemasync">
		<copy todir="../mvndbschemasync/src/main/java">
			<fileset dir="src">
				<include name="**/dbschemasync/*.java" />
			</fileset>
		</copy>
		<copy todir="../mvndbschemasync/src/assembly">
			<fileset dir="dbschemasetup">
			</fileset>
		</copy>
		<copy tofile="../mvndbschemasync/src/assembly/bin.xml" file="bin.xml" />
	</target>


	<target name="pom-schemasync" depends="copysrc-schemasync">
		<copy tofile="../mvndbschemasync/LICENSE.txt" file="gpl.txt" />
		<copy tofile="../mvndbschemasync/pom.xml" file="pom-schemasync.xml" />
	</target>


</project>
